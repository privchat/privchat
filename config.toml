# PrivChat Server é…ç½®æ–‡ä»¶
# æ­¤æ–‡ä»¶ç”± privchat-server --generate-config ç”Ÿæˆ
# ç½‘å…³ï¼š[gateway] ä¸ gateway.listenersï¼›æ–‡ä»¶ï¼š[file] å« server_port / server_api_base_url

[gateway]
max_connections = 2000
connection_timeout = 300
heartbeat_interval = 60
use_internal_auth = true
handler_max_inflight = 2000

[[gateway.listeners]]
protocol = "tcp"
host = "0.0.0.0"
port = 9001

[[gateway.listeners]]
protocol = "quic"
host = "0.0.0.0"
port = 9001

[[gateway.listeners]]
protocol = "websocket"
host = "0.0.0.0"
port = 9080
path = "/gate"
compression = true

[cache]
l1_max_memory_mb = 256
l1_ttl_secs = 3600

[cache.redis]
url = "redis://127.0.0.1:6379"
pool_size = 50
min_idle = 10
connection_timeout = 5
command_timeout_ms = 5000
idle_timeout = 300

[cache.online_status]
timeout_seconds = 300
cleanup_interval_seconds = 60

[file]
default_storage_source_id = 0
server_port = 9083
server_api_base_url = "http://localhost:9083/api/app"

[[file.storage_sources]]
id = 0
storage_type = "local"
storage_root = "./storage/files"
base_url = "http://localhost:8080/files"

# å¤šæ•°æ®ä¸­å¿ƒç¤ºä¾‹ï¼šå†å¢åŠ  id=1ã€id=2 ç­‰ï¼Œä¸åŒæœºæˆ¿è®¾ç½®ä¸åŒ default_storage_source_id å³å¯
# [[file.storage_sources]]
# id = 1
# storage_type = "local"
# storage_root = "/data/privchat/files-cn"
# base_url = "https://files-cn.example.com/files"
#
# [[file.storage_sources]]
# id = 2
# storage_type = "local"
# storage_root = "/data/privchat/files-us"
# base_url = "https://files-us.example.com/files"

[logging]
level = "info"
format = "compact"

# ==========================================
# ç³»ç»Ÿæ¶ˆæ¯é…ç½®
# ==========================================
[system_message]
# æ˜¯å¦å¯ç”¨ç³»ç»Ÿæ¶ˆæ¯ç”¨æˆ·
enabled = true

# æ–°ç”¨æˆ·æ³¨å†Œæ—¶çš„æ¬¢è¿æ¶ˆæ¯
welcome_message = """
ğŸ‘‹ æ¬¢è¿ä½¿ç”¨ Privchatï¼

è¿™æ˜¯ä¸€ä¸ªç«¯åˆ°ç«¯åŠ å¯†çš„å³æ—¶é€šè®¯ç³»ç»Ÿï¼Œæ‚¨çš„éšç§å®‰å…¨ç”±æˆ‘ä»¬å®ˆæŠ¤ã€‚

ğŸ” ä¸»è¦ç‰¹æ€§ï¼š
â€¢ ç«¯åˆ°ç«¯åŠ å¯†é€šè®¯
â€¢ å¤šè®¾å¤‡åŒæ­¥
â€¢ ç¦»çº¿æ¶ˆæ¯æ¨é€
â€¢ æ–‡ä»¶å®‰å…¨ä¼ è¾“

å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿éšæ—¶è”ç³»æˆ‘ä»¬ï¼
"""

# æ˜¯å¦åœ¨ç”¨æˆ·æ³¨å†Œæ—¶è‡ªåŠ¨åˆ›å»ºä¸ç³»ç»Ÿç”¨æˆ·çš„ä¼šè¯
auto_create_channel = true

# æ˜¯å¦åœ¨åˆ›å»ºä¼šè¯åè‡ªåŠ¨å‘é€æ¬¢è¿æ¶ˆæ¯
auto_send_welcome = true
